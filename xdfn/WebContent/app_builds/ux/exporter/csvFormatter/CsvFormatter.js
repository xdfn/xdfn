Ext.define("Ext.ux.exporter.csvFormatter.CsvFormatter",{extend:"Ext.ux.exporter.Formatter",contentType:"data:text/csv;base64,",separator:",",extension:"csv",lineSeparator:"\n",capitalizeHeaders:false,format:function(a,b){this.columns=b.columns||(a.fields?a.fields.items:a.model.prototype.fields.items);return this.getHeaders()+this.lineSeparator+this.getRows(a)},getHeaders:function(a){var b=[];Ext.each(this.columns,function(c){var d;if(c.text!=undefined){d=c.text}else{if(c.name){d=c.name.replace(/_/g," ")}else{d=""}}if(this.capitalizeHeaders){d=Ext.String.capitalize(d)}b.push(d)},this);return b.join(this.separator)},getRows:function(a){var b=[];a.each(function(c,d){b.push(this.getCells(c,d))},this);return b.join(this.lineSeparator)},getCells:function(a,c){var b=[];Ext.each(this.columns,function(f,e){var d=f.name||f.dataIndex;var g="";if(typeof d!=="undefined"){if(Ext.isFunction(f.renderer)){g=f.renderer(a.get(d),{},a,c,e,a.store)}else{g=a.get(d)}g='"'+g+'"';b.push(g)}});return b.join(this.separator)}});