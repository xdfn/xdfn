Ext.define("xdfn.ux.grid.Printer",{requires:"Ext.XTemplate",statics:{print:function(h,a){var c=a.columns;var d=[];a.store.data.each(function(k){var m=[];for(var j in k.data){var l=k.data[j];Ext.each(c,function(n){if(n.dataIndex==j){m[j]=n.renderer?n.renderer(l):l}},this)}d.push(m)});var i=Ext.create("Ext.XTemplate",this.headerTpl).apply(c);var f=Ext.create("Ext.XTemplate",this.bodyTpl).apply(c);var b=['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',"<html>","<head>",'<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />','<link href="'+this.stylesheetPath+'" rel="stylesheet" type="text/css" media="screen,print" />',"<title>"+h+"</title>","</head>","<body>","<table>",i,'<tpl for=".">',f,"</tpl>","</table>","</body>","</html>"];var e=Ext.create("Ext.XTemplate",b).apply(d);var g=window.open("","printgrid");g.document.write(e);if(this.printAutomatically){g.print();g.close()}},stylesheetPath:"app/ux/grid/gridPrinterCss/print.css",printAutomatically:true,headerTpl:["<tr>",'<tpl for=".">',"<th>{text}</th>","</tpl>","</tr>"],bodyTpl:["<tr>",'<tpl for=".">',"<td>{{dataIndex}}</td>","</tpl>","</tr>"]}});