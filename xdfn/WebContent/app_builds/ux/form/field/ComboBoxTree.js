Ext.define("Ext.ux.form.field.ComboBoxTree",{extend:"Ext.form.field.Picker",alias:"widget.combotree",triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",treeHeight:200,treeStore:null,treeRoot:null,useArrows:false,allowUnLeafClick:false,leafClickDisable:false,displayField:"text",expanded:true,initComponent:function(){var a=this;if(!a.valueField){a.valueField=a.displayField}a.setSubmitValue(null);a.callParent(arguments)},createPicker:function(){var a=this;a.picker=Ext.create("Ext.tree.Panel",{height:a.treeHeight,displayField:a.displayField,autoScroll:true,floating:true,rootVisible:false,useArrows:a.useArrows,ownerCt:a.ownerCt,focusOnToFront:false,store:a.treeStore,listeners:{select:{fn:function(e,b,c,d){if(a.allowUnLeafClick){if(!a.leafClickDisable){a.setValue(b.get(a.displayField));a.setSubmitValue(b.get(a.valueField));a.collapse()}else{if(!b.raw.leaf){a.setValue(b.get(a.displayField));a.setSubmitValue(b.get(a.valueField));a.collapse()}}}else{if(b.raw.leaf){a.setValue(b.get(a.displayField));a.setSubmitValue(b.get(a.valueField));a.collapse()}}}}}});return a.picker},alignPicker:function(){var d=this,c,b,a="-above";if(this.isExpanded){c=d.getPicker();if(d.matchFieldWidth){d.treeWidth=d.treeWidth?d.treeWidth:d.bodyEl.getWidth();c.setSize(d.treeWidth,d.treeHeight)}if(c.isFloating()){c.alignTo(d.inputEl,d.pickerAlign,d.pickerOffset);b=c.el.getY()<d.inputEl.getY();d.bodyEl[b?"addCls":"removeCls"](d.openCls+a);c.el[b?"addCls":"removeCls"](c.baseCls+a)}}},onExpand:function(){var a=this;if(a.expanded){a.picker.expandAll()}},setSubmitValue:function(b){var a=this;a.submitValue=b},getSubmitValue:function(){var a=this;return a.submitValue},reset:function(){var a=this;a.callParent();a.applyEmptyText();a.setSubmitValue(null)}});