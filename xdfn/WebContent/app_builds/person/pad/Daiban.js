Ext.define("xdfn.person.pad.Daiban",{extend:"Ext.ux.portal.Portlet",id:"daiban",title:"待办日程",layout:{type:"fit"},height:268,listeners:{destroy:function(a,b){Ext.getCmp("PersonPad").down('menucheckitem[text="待办日程"]').setChecked(false)}},getTools:function(){var a=this;return[{xtype:"tool",type:"refresh",handler:function(f,d,c,b){a.schStore.load()}}]},initComponent:function(){var a=this;a.schStore=Ext.create("xdfn.person.store.ScheduleJsonStore",{autoLoad:true,proxy:{type:"ajax",url:"./userManage.do?method=getAgendaList",reader:{type:"json",root:"data"}}});a.tools=a.getTools();a.items=[{xtype:"gridpanel",forceFit:true,store:a.schStore,flex:1,border:false,columns:[{xtype:"gridcolumn",dataIndex:"ID_VIEW",text:"ID",hidden:true,hideable:false},{xtype:"gridcolumn",dataIndex:"V_TITLE_VIEW",width:200,text:"日程标题"},{xtype:"gridcolumn",dataIndex:"V_TYPE_SHIYOU_VIEW",text:"事由类型"},{xtype:"gridcolumn",dataIndex:"V_TYPE_BELONG_VIEW",text:"归属类型"},{xtype:"gridcolumn",dataIndex:"V_LEVEL_VIEW",text:"等级"}],viewConfig:{},dockedItems:[{xtype:"pagingtoolbar",displayInfo:true,store:a.schStore,dock:"bottom"}]}];a.callParent(arguments);a.down("gridpanel").on("itemdblclick",a.OnGridItemDbClick,a)},OnGridItemDbClick:function(i,b,k,c,d,f){var h=this,g=h.up("tabpanel"),a=Ext.getCmp("PersonSchedule");if(a==undefined){g.setActiveTab(g.add(Ext.create("xdfn.person.PersonSchedule",{ID:b.get("ID_VIEW")})))}else{g.setActiveTab(a);var j=a.down("gridpanel").getStore();Ext.apply(j.getProxy(),{extraParams:{ID:b.get("ID_VIEW")}});j.load()}}});